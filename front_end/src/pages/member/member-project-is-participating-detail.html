<div id="main" class="main">
  <div class="row">
    <div class="content-title">
      <div class="title-project">
        <h4>{{detailProject.name}}</h4>
      </div>
      <div class="listPeriod">
        <select
          name=""
          ng-change="changePeriod()"
          ng-model="valuePeriod"
          class="form-control select"
          id=""
        >
          <option value="" hidden>Giai đoạn</option>
          <option value="{{item.id}}" ng-repeat="item in listPeriodById">
            {{item.name}}
          </option>
        </select>
      </div>
      <div class="listPeriod__btn">
        <a href="#member/period-project/{{projectId}}">
          <div
            class="btn_eye"
            data-toggle="tooltip"
            title="Xem chi tiết các giai đoạn"
          >
            <img src="../../../assets/img/eye-fill.svg" />
          </div>
        </a>
      </div>
      <div class="list-member">
        <a
          ng-repeat-start="member in listMemberById | limitTo:4"
          data-toggle="tooltip"
          title="{{member.name}}"
          href=""
        >
          <img
            class="rounded-circle"
            width="30px"
            height="30px"
            src="{{member.image}}"
            alt=""
          />
        </a>
        <a ng-repeat-end></a>
        <button
          class="btn-people"
          data-bs-toggle="modal"
          data-bs-target="#modal_showMember"
        >
          +7
        </button>
      </div>
    </div>
  </div>
  <br />
  <div class="container-custom-trello">
    <div class="row flex-nowrap">
      <div style="width: auto">
        <div class="card trello-card">
          <div class="card-body">
            <h6 class="card-title">TÀI LIỆU DỰ ÁN</h6>
            <ul class="list-group">
              <li ng-repeat="item in listResource" class="list-group-item">
                <a> {{item.name}} <br /><i class="bx bx-file"></i></a>
              </li>
              <li
                class="list-group-item"
                ng-click="addACard(xx.id)"
                ng-hide="xx.checkShowAddCard"
              >
                <i class="bx bx-plus"></i> Add a card
              </li>
              <!-- <li class="list-group-item"> -->
              <div class="form_add_card" ng-show="xx.checkShowAddCard">
                <input
                  type="text"
                  placeholder="Enter card title"
                  class="form-control mb-2"
                  name="inputTitle"
                  ng-model="valueInput"
                />
                <button ng-click="addNewResource()" class="btn btn-primary">
                  Add card
                </button>
                <button
                  class="btn btn-outline-secondary"
                  ng-click="xx.checkShowAddCard = false"
                >
                  Close
                </button>
              </div>
              <!-- </li> -->
            </ul>
          </div>
        </div>
      </div>
      <div ng-repeat="xx in listTask" style="width: auto">
        <div class="card trello-card">
          <div class="card-body">
            <h6 class="card-title">{{xx.name}}</h6>
            <ul
              class="list-group"
              dnd-list="xx.todoList"
              ng-init="externalSources=['external']"
              dnd-allow-same-container
              dnd-external-sources="externalSources"
              dnd-drop="onDrop($event, index, item, external, type, xx)"
            >
              <li
                ng-repeat="item in xx.todoList"
                dnd-draggable="item"
                dnd-selected="selected = item"
                ng-class="{selected: selected === item}"
                class="list-group-item"
                dnd-effect-allowed="move"
                dnd-dragstart="onDragStart($index, xx.todoList)"
                dnd-dragend="onDragEnd(item, xx, $event, $index)"
                dnd-moved="draggedItem = item"
                style="list-style: none"
                data-bs-toggle="modal"
                data-bs-target="#modal_show_detail_todo"
                ng-click="actionDetailTodo(item.id)"
              >
                <div>
                  <span
                    ng-repeat="lb in item.labels"
                    data-toggle="tooltip"
                    title="{{lb.name}}"
                    class="label_todo"
                    ng-style="{ backgroundColor: lb.colorLabel }"
                    ><span class="label_dot"></span>{{lb.code}}</span
                  >
                </div>
                <a
                  >{{item.name}}
                  <br />
                  <span
                    data-toggle="tooltip"
                    title="{{item.priorityLevel == 0 ? 'Quan trọng' :
                    (item.priorityLevel == 1 ? 'Cao' : (item.priorityLevel == 2
                    ? 'Trung bình' : 'Thấp'))}}"
                    class="prioritylevel_todo"
                    ng-style="{ backgroundColor: item.priorityLevel == 0 ? 'red' : item.priorityLevel == 1 ? 'orange' : item.priorityLevel == 2 ? 'yellow' : 'green' }"
                  >
                  </span>
                  <br /><i class="bx bx-menu"></i
                ></a>
                <div class="list_member_todo">
                  <a
                    ng-repeat="member in item.members"
                    data-toggle="tooltip"
                    title="{{member.name}}"
                    href=""
                  >
                    <img
                      class="rounded-circle"
                      width="27px"
                      height="27px"
                      src="{{member.image}}"
                      alt=""
                    />
                  </a>
                </div>
              </li>
              <li
                class="list-group-item"
                ng-click="addACard(xx.id)"
                ng-hide="xx.checkShowAddCard"
              >
                <i class="bx bx-plus"></i> Add a card
              </li>
              <!-- <li class="list-group-item"> -->
              <div class="form_add_card" ng-show="xx.checkShowAddCard">
                <input
                  type="text"
                  placeholder="Enter card title"
                  class="form-control mb-2"
                  name="inputTitle"
                  ng-model="valueInput"
                />
                <button ng-click="addNewCard(xx.id)" class="btn btn-primary">
                  Add card
                </button>
                <button
                  class="btn btn-outline-secondary"
                  ng-click="xx.checkShowAddCard = false"
                >
                  Close
                </button>
                <div class="toggle-menu">
                  <button
                    class="btn btn-outline-secondary custom"
                    ng-click="toggleMenu()"
                  >
                    ...
                  </button>
                  <ul ng-show="showMenu">
                    <li><a href="#">Edit</a></li>
                    <li><a href="#">Delete</a></li>
                  </ul>
                </div>
              </div>
              <!-- </li> -->
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div
    class="modal fade"
    id="modal_showMember"
    tabindex="-1"
    aria-labelledby="exampleModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-lg modal-lg" role="document">
      <div class="modal-content">
        <form id="form_member">
          <div class="modal-header">
            <h5 class="modal-title">Danh sách các thành viên tham gia dự án</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <div class="container">
              <div ng-repeat="member in listMemberById">
                <div class="custom_member">
                  <img
                    class="rounded-circle"
                    width="50px"
                    height="50px"
                    src="{{member.image}}"
                    alt=""
                  />
                  <span style="margin-left: 20px; font-size: 16px"
                    >{{member.name}}</span
                  >
                  <span class="role_member_custom" style="margin-left: 20px">
                    {{member.role == 0 ? "Quản lý" : "Thành viên"}}</span
                  >
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-outline-secondary btn btn-light"
              data-bs-dismiss="modal"
            >
              Hủy
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
  <div
    class="modal fade"
    id="modal_show_detail_todo"
    tabindex="-1"
    aria-labelledby="exampleModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-lg modal-lg" role="document">
      <div class="modal-content">
        <form id="form_member">
          <div class="modal-header">
            <h5 class="modal-title" style="width: auto">
              <i class="bx bx-task"></i>
              <b
                ><input
                  class="title_detail_todo"
                  type="text"
                  value="{{detailTodo.name}}"
              /></b>
              <br />
              <p style="font-size: 14px">
                trong danh sách {{detailTodo.statusTodo}}
              </p>
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <div class="container-fluid">
              <div class="row">
                <div class="col-9">
                  <div class="member__label">
                    <div class="member_detail_todo">
                      <h6 style="font-size: 14px">Thành viên</h6>
                      <a
                        ng-repeat="member in detailTodo.listMemberDetailTodo"
                        data-toggle="tooltip"
                        title="{{member.name}}"
                        href=""
                      >
                        <img
                          class="rounded-circle"
                          width="35px"
                          height="35px"
                          src="{{member.image}}"
                          alt=""
                        />
                      </a>
                      <button class="btn-add-member">
                        <i class="bx bx-plus"></i>
                      </button>
                    </div>
                    <div class="label_detail_todo">
                      Nhãn
                      <div class="span_custom_label">
                        <span
                          ng-repeat="lb in detailTodo.listLabelDetailTodo"
                          data-toggle="tooltip"
                          title="{{lb.name}}"
                          class="span_label"
                          ng-style="{ backgroundColor: lb.colorLabel }"
                          ><span class="label_dot_detail"></span
                          >{{lb.code}}</span
                        >
                        <span class="span_label_plus"
                          ><i class="bx bx-plus"></i
                        ></span>
                      </div>
                    </div>
                  </div>
                  <div class="descipstions_custom">
                    <i class="bx bx-menu"></i><span> Mô tả </span> <br />
                    <textarea
                      name=""
                      class="textarea_custom_detail_todo"
                      id=""
                      cols="30"
                      rows="10"
                    ></textarea>
                  </div>
                  <div class="checklist_custom">
                    <i class="bx bx-task"></i>
                    <span style="font-size: 17px; font-weight: 500">
                      Danh sách đầu việc</span
                    >
                    <div class="list_task_checklist">
                      <progress value="50" max="100"></progress>
                      <div class="checkbox_list">
                        <input
                          type="checkbox"
                          class="form-check-input custom"
                        /><span class="content_checklist"> Xem </span>
                      </div>
                      <div class="checkbox_list">
                        <input
                          type="checkbox"
                          class="form-check-input custom"
                        />
                        <span class="content_checklist"> Xem </span>
                      </div>
                    </div>
                  </div>
                  <div class="activity_custom">
                    <i class="bx bx-menu"></i
                    ><span style="font-size: 17px; font-weight: 500">
                      Hoạt động
                    </span>
                    <br />
                  </div>
                </div>
                <div class="col-3">
                  <span style="font-size: 14px">Thêm vào thẻ</span>
                  <div class="row">
                    <button class="btn_add_to_card">
                      <i class="bx bx-user"></i> Thành viên
                    </button>
                    <button class="btn_add_to_card">
                      <i class="bx bx-label"></i> Nhãn
                    </button>
                    <button class="btn_add_to_card">
                      <i class="bx bx-task"></i> Đầu việc
                    </button>
                    <button class="btn_add_to_card">
                      <i class="bx bx-time"></i> Ngày hạn
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
